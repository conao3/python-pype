{%- macro arg_e_body() -%}
L = line
_ = L
{{ arg_e }}
{%- endmacro %}

{%- macro arg_l_body() -%}
{%- if arg_l %}
line = line.strip()
{%- endif %}
{%- endmacro %}

{%- macro arg_a_body_pre() -%}
{%- if arg_a %}
__sep = None
{%- endif %}
{%- endmacro %}

{%- macro arg_a_body() -%}
{%- if arg_a %}
words = line.split(__sep)
F = words
{%- endif %}
{%- endmacro %}

{%- macro arg_large_f_body() -%}
{%- if arg_large_f %}
__sep = "{{ arg_large_f }}"
{%- endif %}
{%- endmacro %}

{#--#}

import sys

with open("tmp.fifo") as f:
    {%- if arg_n %}
    for NR, line in enumerate(f, start=1):
        {##}
        {{ arg_l_body() | indent(8) }}
        {{ arg_a_body_pre() | indent(8) }}
        {{ arg_large_f_body() | indent(8) }}
        {{ arg_a_body() | indent(8) }}
        {{ arg_e_body() | indent(8) }}
    {%- else %}
    line = f.read()
    {{ arg_l_body() | indent(4) }}
    {{ arg_a_body_pre() | indent(4) }}
    {{ arg_large_f_body() | indent(4) }}
    {{ arg_a_body() | indent(4) }}
    {{ arg_e_body() | indent(4) }}
    {%- endif %}
